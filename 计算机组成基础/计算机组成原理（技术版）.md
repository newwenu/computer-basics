# 计算机组成原理（技术版）

## 一、计算机系统结构

### 1.1 冯·诺依曼体系结构（Von Neumann Architecture）

- 五大部件：运算器、控制器、存储器、输入设备、输出设备
- 存储程序概念：指令和数据同等存储在内存中
- 按地址访问：程序计数器(PC)控制指令执行顺序

### 1.2 计算机层次结构

- 硬件层：数字逻辑电路、微架构
- 指令系统层：机器指令、汇编语言
- 操作系统层：资源管理、进程调度
- 应用程序层：高级语言编程

## 二、中央处理器(CPU)

### 2.1 CPU组成

- 运算器(ALU)：算术逻辑运算
- 控制器(CU)：指令译码、时序控制
- 寄存器组：通用寄存器、专用寄存器
- 缓存：L1/L2/L3多级缓存结构

### 2.2 显卡(GPU)

- 图形处理器：专门处理图形渲染和并行计算
- 显存：GDDR6/GDDR6X，高速图形内存
- CUDA核心：NVIDIA并行计算单元
- 性能指标：显存容量、显存位宽、核心频率

### 2.3 主板芯片组

- 北桥：连接CPU、内存、显卡（现代CPU已集成）
- 南桥：连接I/O设备、硬盘、USB等
- BIOS/UEFI：基本输入输出系统固件
- 扩展插槽：PCIe x16、PCIe x1、M.2接口

### 2.4 指令执行过程

```
取指 → 译码 → 执行 → 访存 → 写回
```

- 取指：从内存读取指令
- 译码：解析指令操作码
- 执行：ALU完成运算
- 访存：访问内存读写数据
- 写回：结果写入寄存器

### 2.5 性能指标

- 主频：GHz，时钟频率
- CPI：每条指令所需时钟周期数
- MIPS：每秒百万条指令
- 功耗：TDP，热设计功耗

## 三、存储系统

### 3.1 存储器层次

```
寄存器 → 缓存 → 主存 → 辅存
```

- 寄存器：ns级，CPU内部
- 缓存：SRAM，几MB容量
- 主存：DRAM，GB级容量
- 辅存：SSD/HDD，TB级容量

### 3.2 主存储器

- DRAM：动态随机存取存储器
- DDR标准：DDR4/DDR5，双倍数据速率
- 内存通道：单通道、双通道、四通道
- 技术参数：频率(MHz)、时序(CL)、容量(GB)

### 3.3 显卡内存

- 显存类型：GDDR6、GDDR6X、HBM2
- 显存位宽：128bit、256bit、384bit
- 显存带宽：计算方式(频率×位宽×2/8)
- 光追核心：RT Core，光线追踪计算单元

### 3.4 辅助存储器

- HDD：机械硬盘，磁头+盘片
- SSD：固态硬盘，闪存芯片
- 接口：SATA、NVMe、PCIe

### 3.5 存储性能参数

| 类型 | 访问时间 | 容量 | 价格/GB | 断电保持 |
|-----|---------|------|---------|----------|
| 寄存器 | <1ns | <1KB | 极高 | 否 |
| L1缓存 | 1ns | 64KB | 极高 | 否 |
| L2缓存 | 4ns | 512KB | 极高 | 否 |
| 主存(DDR4) | 50ns | 4-64GB | 中等 | 否 |
| 显存(GDDR6) | 10ns | 4-24GB | 高 | 否 |
| SSD(NVMe) | 100μs | 256GB-4TB | 低 | 是 |
| HDD | 10ms | 1-20TB | 极低 | 是 |

## 四、输入输出系统

### 4.1 I/O接口

- 并行接口：多位同时传输
- 串行接口：一位一位传输
- 标准接口：USB、PCIe、SATA

### 4.2 显示接口

- HDMI：高清多媒体接口，支持音视频
- DisplayPort：专业显示接口，高带宽
- VGA：模拟信号接口，逐渐淘汰
- DVI：数字视频接口，过渡产品

### 4.3 网络接口

- RJ45：以太网接口，10/100/1000Mbps
- Wi-Fi：无线局域网，802.11标准
- 蓝牙：短距离无线通信
- 光纤接口：高速远距离传输

### 4.4 I/O控制方式

- 程序查询：CPU轮询设备状态
- 中断方式：设备就绪后中断CPU
- DMA：直接内存访问，无需CPU参与
- 通道方式：专用I/O处理器

### 4.5 总线系统

- 数据总线：传输数据
- 地址总线：传输地址
- 控制总线：传输控制信号
- 带宽：数据传输速率

## 五、指令系统

### 5.1 指令格式

```
操作码 | 地址码
```

- 操作码：指定操作类型
- 地址码：指定操作数地址
- 指令长度：定长、变长

### 5.2 显卡指令集

- 图形渲染指令：顶点处理、像素着色
- 并行计算指令：CUDA、OpenCL
- 光线追踪指令：RT核心专用指令
- 深度学习指令：Tensor核心指令

### 5.3 网络指令

- 加密指令：AES、SHA硬件加速
- 数据压缩指令：快速压缩算法
- 网络协议指令：TCP/IP加速

### 5.4 寻址方式

- 立即寻址：操作数在指令中
- 直接寻址：操作数地址在指令中
- 间接寻址：操作数地址在内存中
- 寄存器寻址：操作数在寄存器中

### 5.5 指令类型

- 数据传送：MOV、LOAD、STORE
- 算术逻辑：ADD、SUB、AND、OR
- 程序控制：JMP、CALL、RET
- 输入输出：IN、OUT

## 六、数据表示与运算

### 6.1 数制系统

- 二进制：0、1
- 十六进制：0-9、A-F
- 转换：二进制↔十进制↔十六进制

### 6.2 数据编码

- 无符号数：正整数
- 有符号数：原码、反码、补码
- 浮点数：IEEE 754标准
- BCD码：二进制编码的十进制

### 6.3 显卡浮点运算

- 半精度：16位浮点，深度学习常用
- 单精度：32位浮点，图形渲染标准
- 双精度：64位浮点，科学计算
- 张量精度：混合精度计算，AI加速

### 6.4 运算方法

- 定点运算：整数加减乘除
- 浮点运算：科学计数法运算
- 逻辑运算：与、或、非、异或
- 移位运算：算术移位、逻辑移位

## 七、控制器设计

### 7.1 控制方式

- 组合逻辑控制：硬件电路实现，速度快，灵活性差
- 微程序控制：存储控制信号，速度慢，灵活性高

### 7.4 显卡控制器

- 图形管线控制器：顶点、几何、像素处理
- 并行计算调度器：CUDA核心任务分配
- 光线追踪控制器：RT核心专用调度
- 内存控制器：显存访问优化

### 7.3 显卡控制器

- 时钟周期：CPU基本时间单位
- 机器周期：完成一个操作的时间
- 指令周期：完成一条指令的时间
- 节拍信号：控制操作步骤

## 八、计算机性能优化

### 8.1 流水线技术

```
IF → ID → EX → MEM → WB
取指 译码 执行 访存 写回
```

- 加速比：非流水线时间/流水线时间
- 效率：设备利用率
- 吞吐率：单位时间完成任务数

### 8.2 显卡并行处理

- SIMD：单指令多数据流
- SIMT：单指令多线程（CUDA核心）
- 流处理器：大规模并行计算单元
- 张量核心：深度学习专用计算单元

### 8.3 并行处理

- 时间并行：流水线技术
- 空间并行：多处理器系统
- SIMD：单指令流多数据流
- MIMD：多指令流多数据流

### 8.4 缓存优化

- 缓存映射：直接映射、全相联、组相联
- 替换算法：LRU、FIFO、随机
- 写策略：写直达、写回
- 一致性：MESI协议

## 九、系统总线

### 9.1 总线分类

- 片内总线：CPU内部总线
- 系统总线：连接主要部件
- 通信总线：连接外部设备

### 9.2 显卡总线

- PCIe x16：显卡专用插槽
- 带宽：PCIe 4.0 x16 达到 32GB/s
- 供电：75W（插槽）+ 额外供电
- 多卡互联：SLI/CrossFire技术

### 9.5 总线性能

- 总线宽度：同时传输的数据位数
- 总线频率：每秒传输次数
- 总线带宽：总线宽度×总线频率
- 传输方式：串行、并行、突发传输

### 9.6 总线仲裁

- 集中式：总线控制器
- 分布式：各设备竞争
- 优先级：固定优先级、轮转

### 9.3 总线标准

- ISA：工业标准架构
- PCI：外围组件互连
- PCIe：PCI Express，串行总线
- USB：通用串行总线

## 十、可靠性技术

### 10.1 容错技术

- 冗余技术：硬件冗余、时间冗余
- 纠错码：海明码、CRC码
- 故障检测：奇偶校验、超时检测

### 10.4 可靠性指标

- MTBF：平均故障间隔时间
- MTTR：平均修复时间
- 可用性：MTBF/(MTBF+MTTR)

### 10.2 硬件可靠性

- 显卡散热：风扇、散热片、水冷
- 电源保护：过压、过流、短路保护
- 内存ECC：错误检测与纠正
- 硬盘保护：震动保护、温度监控

### 10.3 系统可靠性

- 冗余设计：双显卡、双电源
- 热插拔：不停机更换设备
- 故障预警：温度、电压监控
- 备份机制：数据冗余保护
- 可靠性：系统无故障运行的概率
